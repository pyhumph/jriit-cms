generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Admin {
  id                 String              @id @default(cuid())
  email              String              @unique
  password           String
  name               String
  role               Role                @default(ADMIN)
  avatar             String?
  isActive           Boolean             @default(true)
  lastLogin          DateTime?
  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  activityLogs       ActivityLog[]
  departments        Department[]
  events             Event[]
  faculty            Faculty[]
  feeStructures      FeeStructure[]
  heroSlides         HeroSlide[]
  homepageComponents HomepageComponent[]
  media              Media[]
  news               News[]
  notifications      Notification[]
  pageComponents     PageComponent[]
  pages              Page[]
  photoAlbums        PhotoAlbum[]
  posts              Post[]
  programs           Program[]
  testimonials       Testimonial[]
  videos             Video[]
  websitePages       WebsitePage[]

  @@map("admins")
}

model GlobalSettings {
  id                     String   @id @default(cuid())
  siteName               String   @default("JRIIIT Institute")
  siteTagline            String?
  siteDescription        String?
  logo                   String?
  favicon                String?
  academicYear           String   @default("2025-2026")
  currentYear            Int      @default(2025)
  copyrightText          String   @default("Â© {CURRENT_YEAR} {SITE_NAME}. All rights reserved.")
  contactEmail           String?
  contactPhone           String?
  contactAddress         String?
  contactCity            String?
  contactState           String?
  contactZip             String?
  contactCountry         String?
  facebookUrl            String?
  twitterUrl             String?
  instagramUrl           String?
  linkedinUrl            String?
  youtubeUrl             String?
  maintenanceMode        Boolean  @default(false)
  maintenanceMessage     String?
  announcementBanner     String?
  announcementLink       String?
  showAnnouncement       Boolean  @default(false)
  defaultMetaTitle       String?
  defaultMetaDescription String?
  defaultMetaKeywords    String?
  googleAnalyticsId      String?
  maxFileSize            Int      @default(10485760)
  allowedImageTypes      String   @default("jpg,jpeg,png,webp,gif")
  allowedVideoTypes      String   @default("mp4,webm,avi")
  allowedDocTypes        String   @default("pdf,doc,docx,txt")
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt

  @@map("global_settings")
}

model TextSnippet {
  id          String   @id @default(cuid())
  key         String   @unique
  title       String
  content     String
  description String?
  category    String?
  isActive    Boolean  @default(true)
  usageCount  Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("text_snippets")
}

model Navigation {
  id         String             @id @default(cuid())
  label      String
  url        String?
  icon       String?
  order      Int                @default(0)
  isActive   Boolean            @default(true)
  isExternal Boolean            @default(false)
  target     String             @default("_self")
  parentId   String?
  level      Int                @default(0)
  position   NavigationPosition @default(HEADER)
  createdAt  DateTime           @default(now())
  updatedAt  DateTime           @updatedAt
  parent     Navigation?        @relation("NavigationHierarchy", fields: [parentId], references: [id], onDelete: Cascade)
  children   Navigation[]       @relation("NavigationHierarchy")

  @@map("navigation")
}

model Post {
  id              String    @id @default(cuid())
  title           String
  slug            String    @unique
  content         String
  excerpt         String?
  featuredImage   String?
  published       Boolean   @default(false)
  publishedAt     DateTime?
  authorId        String
  tags            String?
  metaTitle       String?
  metaDescription String?
  metaKeywords    String?
  viewCount       Int       @default(0)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  author          Admin     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("posts")
}

model News {
  id              String    @id @default(cuid())
  title           String
  slug            String    @unique
  content         String
  excerpt         String?
  featuredImage   String?
  published       Boolean   @default(false)
  publishedAt     DateTime?
  authorId        String
  category        String?
  tags            String?
  metaTitle       String?
  metaDescription String?
  metaKeywords    String?
  viewCount       Int       @default(0)
  isBreaking      Boolean   @default(false)
  isFeatured      Boolean   @default(false)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  author          Admin     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("news")
}

model Event {
  id                   String    @id @default(cuid())
  title                String
  slug                 String    @unique
  description          String
  content              String?
  featuredImage        String?
  startDate            DateTime
  endDate              DateTime?
  location             String?
  venue                String?
  registrationUrl      String?
  capacity             Int?
  isPublic             Boolean   @default(true)
  isFree               Boolean   @default(true)
  price                Decimal?
  currency             String    @default("USD")
  category             String?
  tags                 String?
  metaTitle            String?
  metaDescription      String?
  metaKeywords         String?
  viewCount            Int       @default(0)
  isFeatured           Boolean   @default(false)
  registrationDeadline DateTime?
  authorId             String
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  author               Admin     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("events")
}

model Page {
  id              String    @id @default(cuid())
  title           String
  slug            String    @unique
  content         String
  excerpt         String?
  featuredImage   String?
  published       Boolean   @default(false)
  publishedAt     DateTime?
  authorId        String
  template        String?
  metaTitle       String?
  metaDescription String?
  metaKeywords    String?
  viewCount       Int       @default(0)
  isHomepage      Boolean   @default(false)
  showInMenu      Boolean   @default(true)
  order           Int       @default(0)
  parentId        String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  parent          Page?     @relation("PageHierarchy", fields: [parentId], references: [id], onDelete: Cascade)
  children        Page[]    @relation("PageHierarchy")
  admins          Admin     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("pages")
}

model Media {
  id           String       @id @default(cuid())
  filename     String
  originalName String
  url          String
  thumbnailUrl String?
  type         MediaType
  mimeType     String
  size         Int
  width        Int?
  height       Int?
  altText      String?
  caption      String?
  description  String?
  tags         String?
  uploadedBy   String
  isPublic     Boolean      @default(true)
  usageCount   Int          @default(0)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  albumPhotos  AlbumPhoto[]
  uploader     Admin        @relation(fields: [uploadedBy], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("media")
}

model PhotoAlbum {
  id          String       @id @default(cuid())
  title       String
  slug        String       @unique
  description String?
  coverImage  String?
  isPublic    Boolean      @default(true)
  order       Int          @default(0)
  authorId    String
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  photos      AlbumPhoto[]
  author      Admin        @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("photo_albums")
}

model AlbumPhoto {
  id        String     @id @default(cuid())
  albumId   String
  mediaId   String
  caption   String?
  altText   String?
  order     Int        @default(0)
  createdAt DateTime   @default(now())
  media     Media      @relation(fields: [mediaId], references: [id], onDelete: Cascade)
  album     PhotoAlbum @relation(fields: [albumId], references: [id], onDelete: Cascade)

  @@map("album_photos")
}

model Video {
  id           String        @id @default(cuid())
  title        String
  slug         String        @unique
  description  String?
  url          String
  thumbnailUrl String?
  duration     Int?
  platform     VideoPlatform @default(YOUTUBE)
  isPublic     Boolean       @default(true)
  isFeatured   Boolean       @default(false)
  category     String?
  tags         String?
  viewCount    Int           @default(0)
  authorId     String
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  author       Admin         @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("videos")
}

model Department {
  id               String    @id @default(cuid())
  name             String
  slug             String    @unique
  description      String?
  headOfDepartment String?
  email            String?
  phone            String?
  office           String?
  isActive         Boolean   @default(true)
  order            Int       @default(0)
  authorId         String
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  author           Admin     @relation(fields: [authorId], references: [id], onDelete: Cascade)
  faculty          Faculty[]
  programs         Program[]

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("departments")
}

model Program {
  id                  String         @id @default(cuid())
  name                String
  slug                String         @unique
  description         String?
  shortDescription    String?
  duration            String?
  degree              String?
  departmentId        String?
  requirements        String?
  curriculum          String?
  careerOpportunities String?
  featuredImage       String?
  isActive            Boolean        @default(true)
  isFeatured          Boolean        @default(false)
  order               Int            @default(0)
  authorId            String
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt
  fees                FeeStructure[]
  department          Department?    @relation(fields: [departmentId], references: [id])
  author              Admin          @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Detail Page Content Fields
  // Layout Configuration
  detailPageLayout String? // "standard", "custom-applications", "custom-adobe"

  // Hero Section
  heroTitle    String?
  heroSubtitle String?
  heroImage    String?

  // Overview Section
  overviewTitle   String?
  overviewContent String? // Long text content

  // What You'll Learn Section
  learningTitle String?
  learningItems String? // JSON array: [{icon, title, description}]

  // Course Modules Section
  modulesTitle String?
  modules      String? // JSON array: ["Module 1", "Module 2", ...]

  // Program Details (Sidebar)
  detailsDuration      String?
  detailsFormat        String?
  detailsSchedule      String?
  detailsPrerequisites String? // Long text content

  // Career Opportunities (Sidebar)
  careerTitle             String?
  careerOpportunitiesJson String? // JSON array: ["Career 1", "Career 2", ...]

  // Call-to-Action Section (Sidebar)
  ctaTitle       String?
  ctaDescription String? // Long text content

  // Custom Layout Content (for custom-applications and custom-adobe)
  // Stores: applications array, skillLevels array, and other custom fields
  customContent String? // JSON object for custom layout data (legacy, kept for backward compatibility)

  // Hero Section Applications (quick links for custom layouts)
  heroApplications String? // JSON array: [{name, icon, slug}]

  // Complete Suite Section (for custom layouts)
  suiteTitle       String? // Section title (e.g., "Complete Application Suite")
  suiteDescription String? // Section description

  // Application Cards (for custom layouts)
  applicationCards String? // JSON array: [{name, icon, description, features[], color}]

  // Learning Path Section (for custom layouts)
  learningPathTitle String? // Section title (e.g., "Learning Path")
  learningPathDesc  String? // Section description

  // Learning Levels (for custom layouts)
  learningLevels String? // JSON array: [{level, duration, modules[]}]

  // Cyber Security Layout Fields
  introParagraphs String? // JSON array: ["paragraph1", "paragraph2", ...]
  classroomImage String?
  classroomTitle String? // Default: "IN THE CLASSROOM"
  classroomParagraphs String? // JSON array: ["paragraph1", "paragraph2", ...]
  beyondClassroomImage String?
  beyondClassroomTitle String? // Default: "BEYOND THE CLASSROOM"
  beyondClassroomParagraphs String? // JSON array: ["paragraph1", "paragraph2", ...]
  differenceImage String?
  differenceTitle String? // e.g., "CYBERSECURITY + THE JRIIT DIFFERENCE"
  differenceParagraphs String? // JSON array: ["paragraph1", "paragraph2", ...]

  // Computer Science/Engineering Layout Fields (CourseDetailPage)
  level String? // e.g., "Beginner to Intermediate"
  learningOutcomes String? // JSON array: ["outcome1", "outcome2", ...]
  careerPaths String? // JSON array: [{title, description, color}]

  // Business Administration / Travel & Tourism Layout Fields
  coreConcepts String? // JSON array: [{icon, title, description, features[], color}]
  learningPath String? // JSON array: [{title, duration, topics[]}]
  // Note: courseModules uses existing "modules" field

  // Professional Course Fields (for external certification programs)
  keyCertifications String? // JSON array: ["Certification 1", "Certification 2", ...]
  externalLink      String? // External URL for "Learn More" button

  // Soft Delete Fields
  deletedAt DateTime? // Null = not deleted, Date = deleted timestamp
  deletedBy String?   // Admin ID who deleted it

  @@map("programs")
}

model Faculty {
  id             String      @id @default(cuid())
  name           String
  title          String?
  email          String?     @unique
  phone          String?
  bio            String?
  photo          String?
  departmentId   String?
  specialization String?
  education      String?
  experience     String?
  achievements   String?
  socialLinks    String?
  isActive       Boolean     @default(true)
  order          Int         @default(0)
  authorId       String
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  department     Department? @relation(fields: [departmentId], references: [id])
  author         Admin       @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("faculty")
}

model FeeStructure {
  id              String    @id @default(cuid())
  programId       String?
  academicYear    String
  semester        String?
  tuitionFee      Decimal
  registrationFee Decimal?
  libraryFee      Decimal?
  labFee          Decimal?
  otherFees       String?
  totalFee        Decimal
  currency        String    @default("USD")
  paymentDeadline DateTime?
  installmentPlan String?
  scholarships    String?
  notes           String?
  isActive        Boolean   @default(true)
  authorId        String
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  program         Program?  @relation(fields: [programId], references: [id])
  author          Admin     @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("fee_structures")
}

model HeroSlide {
  id          String   @id @default(cuid())
  title       String
  subtitle    String
  description String?
  mediaType   String   @default("image")
  mediaUrl    String
  ctaText     String?
  ctaLink     String?
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  authorId    String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  author      Admin    @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("hero_slides")
}

model Testimonial {
  id        String   @id @default(cuid())
  name      String
  title     String?
  content   String
  photo     String?
  rating    Int?
  isActive  Boolean  @default(true)
  order     Int      @default(0)
  authorId  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  author    Admin    @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("testimonials")
}

model Notification {
  id             String           @id @default(cuid())
  title          String
  message        String
  type           NotificationType @default(INFO)
  isActive       Boolean          @default(true)
  startDate      DateTime?
  endDate        DateTime?
  showOnHomepage Boolean          @default(false)
  showOnAllPages Boolean          @default(false)
  targetPages    String?
  authorId       String
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  author         Admin            @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("notifications")
}

model ActivityLog {
  id        String   @id @default(cuid())
  adminId   String
  action    String
  entity    String
  entityId  String
  details   String?
  ipAddress String?
  userAgent String?
  createdAt DateTime @default(now())
  admin     Admin    @relation(fields: [adminId], references: [id], onDelete: Cascade)

  @@map("activity_logs")
}

model HomepageComponent {
  id        String   @id @default(cuid())
  name      String
  type      String
  title     String?
  subtitle  String?
  content   String?
  mediaType String?
  mediaUrl  String?
  ctaText   String?
  ctaLink   String?
  isActive  Boolean  @default(true)
  order     Int      @default(0)
  settings  String?
  authorId  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  cta2Link  String?
  cta2Text  String?
  cta3Link  String?
  cta3Text  String?
  author    Admin    @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@map("homepage_components")
}

model PageComponent {
  id            String   @id @default(cuid())
  pageName      String
  componentName String
  title         String?
  subtitle      String?
  content       String?
  mediaType     String?
  mediaUrl      String?
  ctaText       String?
  ctaLink       String?
  isActive      Boolean  @default(true)
  order         Int      @default(0)
  settings      String?
  authorId      String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  author        Admin    @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // Soft Delete Fields
  deletedAt DateTime?
  deletedBy String?

  @@unique([pageName, componentName])
  @@map("page_components")
}

model WebsitePage {
  id              String   @id @default(cuid())
  name            String
  slug            String   @unique
  title           String?
  description     String?
  metaTitle       String?
  metaDescription String?
  isActive        Boolean  @default(true)
  order           Int      @default(0)
  authorId        String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  author          Admin    @relation(fields: [authorId], references: [id], onDelete: Cascade)

  @@map("website_pages")
}

enum Role {
  ADMIN
  EDITOR
  AUTHOR
}

enum PageStatus {
  DRAFT
  REVIEW
  PUBLISHED
  ARCHIVED
}

enum MediaType {
  IMAGE
  DOCUMENT
  VIDEO
  AUDIO
  OTHER
}

enum NavigationPosition {
  HEADER
  FOOTER
  SIDEBAR
}

enum VideoPlatform {
  YOUTUBE
  VIMEO
  UPLOADED
}

enum NotificationType {
  INFO
  WARNING
  SUCCESS
  ERROR
}
